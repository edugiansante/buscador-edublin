# üîó Conectando Figma Make com GitHub - Guia Completo

Este guia explica como conectar seu projeto do **Figma Make** com **GitHub** para versionamento, colabora√ß√£o e deploy automatizado.

## üìã Vis√£o Geral

```mermaid
flowchart LR
    A[Figma Make] --> B[Exportar C√≥digo]
    B --> C[GitHub Repository]
    C --> D[GitHub Actions]
    D --> E[Deploy Autom√°tico]
    E --> F[Produ√ß√£o]
    
    C --> G[Colabora√ß√£o]
    G --> H[Pull Requests]
    H --> C
```

## üöÄ Passo 1: Exportar C√≥digo do Figma Make

### Op√ß√£o A: Download Manual

1. **No Figma Make**, clique no bot√£o **"Export"** ou **"Download"**
2. Escolha **"Download as ZIP"** ou **"Export Code"**
3. Baixe o arquivo compactado para seu computador
4. Extraia os arquivos em uma pasta local

### Op√ß√£o B: Script Autom√°tico (se dispon√≠vel)

```bash
# Se o Figma Make fornecer API ou CLI
figma-make export --project-id SEU_PROJECT_ID --output ./edublin-export
```

## üêô Passo 2: Criar Reposit√≥rio GitHub

### 2.1 Criar Novo Reposit√≥rio

1. Acesse [github.com](https://github.com)
2. Clique em **"New repository"**
3. Configure:
   ```
   Repository name: edublin
   Description: Plataforma de conex√£o para intercambistas
   Visibility: Public (ou Private)
   Initialize: ‚úÖ Add README
   ‚úÖ Add .gitignore (Node)
   ‚úÖ Choose a license (MIT)
   ```

### 2.2 Clonar Reposit√≥rio Local

```bash
# Clone o reposit√≥rio
git clone https://github.com/SEU_USUARIO/edublin.git
cd edublin

# Verificar estrutura inicial
ls -la
```

## üìÅ Passo 3: Estruturar Projeto

### 3.1 Organizar Arquivos Exportados

```bash
# Copie os arquivos do Figma Make para o reposit√≥rio
cp -r ~/Downloads/figma-make-export/* ./

# Estrutura recomendada:
edublin/
‚îú‚îÄ‚îÄ App.tsx                    # Componente principal
‚îú‚îÄ‚îÄ components/               # Componentes React
‚îú‚îÄ‚îÄ lib/                     # L√≥gica de neg√≥cio
‚îú‚îÄ‚îÄ styles/                  # CSS e estilos
‚îú‚îÄ‚îÄ database/               # Scripts SQL
‚îú‚îÄ‚îÄ scripts/                # Scripts de automa√ß√£o
‚îú‚îÄ‚îÄ .env.example           # Vari√°veis de ambiente
‚îú‚îÄ‚îÄ package.json           # Depend√™ncias
‚îú‚îÄ‚îÄ README.md             # Documenta√ß√£o
‚îî‚îÄ‚îÄ .gitignore           # Arquivos ignorados
```

### 3.2 Configurar .gitignore

```bash
# Criar/atualizar .gitignore
cat > .gitignore << 'EOF'
# Dependencies
node_modules/
/.pnp
.pnp.js

# Production builds
/dist
/build
/.next/
/out/

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Coverage directory used by tools like istanbul
coverage/
*.lcov

# nyc test coverage
.nyc_output

# Dependency directories
node_modules/
jspm_packages/

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# Next.js build output
.next

# Nuxt.js build / generate output
.nuxt
dist

# Vite build output
dist/

# Rollup build output
dist/

# Storybook build outputs
.out
.storybook-out

# Temporary folders
tmp/
temp/

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

# Figma Make specific
.figma-make/
figma-exports/

# Deploy configs
vercel.json
netlify.toml
.vercel
.netlify

# Database
*.db
*.sqlite
*.sqlite3

# OS generated files
Thumbs.db
ehthumbs.db
Desktop.ini
$RECYCLE.BIN/
EOF
```

## üîß Passo 4: Configurar package.json

### 4.1 Inicializar Projeto Node.js

```bash
# Se n√£o existir package.json
npm init -y

# Instalar depend√™ncias do projeto
npm install react react-dom typescript @types/react @types/react-dom
npm install vite @vitejs/plugin-react tailwindcss
npm install @supabase/supabase-js

# Depend√™ncias de desenvolvimento
npm install -D eslint @typescript-eslint/eslint-plugin
npm install -D prettier eslint-config-prettier
```

### 4.2 Scripts √öteis

```json
{
  "name": "edublin",
  "version": "1.0.0",
  "description": "Plataforma de conex√£o para intercambistas",
  "main": "App.tsx",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "lint:fix": "eslint . --ext ts,tsx --fix",
    "type-check": "tsc --noEmit",
    "deploy:vercel": "vercel --prod",
    "deploy:netlify": "netlify deploy --prod",
    "setup": "node scripts/setup-deploy.js",
    "migrate": "node scripts/verify-migration.js",
    "sync:figma": "node scripts/sync-figma.js"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/SEU_USUARIO/edublin.git"
  },
  "keywords": ["intercambio", "estudantes", "react", "supabase"],
  "author": "Seu Nome",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/SEU_USUARIO/edublin/issues"
  },
  "homepage": "https://github.com/SEU_USUARIO/edublin#readme"
}
```

## üîÑ Passo 5: Primeiro Commit

```bash
# Adicionar arquivos ao git
git add .

# Verificar status
git status

# Fazer primeiro commit
git commit -m "üéâ Initial commit: Projeto Edublin do Figma Make

- Estrutura completa do projeto
- Componentes React implementados
- Sistema de autentica√ß√£o Supabase
- Deploy scripts configurados
- Documenta√ß√£o completa

Fonte: Figma Make export"

# Enviar para GitHub
git push origin main
```

## ‚öôÔ∏è Passo 6: GitHub Actions para Deploy

### 6.1 Criar Workflow de Deploy

```yaml
# .github/workflows/deploy.yml
name: üöÄ Deploy Edublin

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

env:
  NODE_VERSION: '18'

jobs:
  # Job de valida√ß√£o
  validate:
    name: üîç Validate & Test
    runs-on: ubuntu-latest
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v4
    
    - name: üì¶ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: ${{ env.NODE_VERSION }}
        cache: 'npm'
    
    - name: üì• Install dependencies
      run: npm ci
    
    - name: üîç Run linter
      run: npm run lint
      continue-on-error: true
    
    - name: üîç Type check
      run: npm run type-check
      continue-on-error: true
    
    - name: üèóÔ∏è Build project
      run: npm run build
      env:
        VITE_SUPABASE_URL: ${{ secrets.VITE_SUPABASE_URL }}
        VITE_SUPABASE_ANON_KEY: ${{ secrets.VITE_SUPABASE_ANON_KEY }}
        VITE_SITE_URL: ${{ secrets.VITE_SITE_URL }}

  # Job de deploy (apenas em main)
  deploy:
    name: üöÄ Deploy to Production
    needs: validate
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main' && github.event_name == 'push'
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v4
    
    - name: üì¶ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: ${{ env.NODE_VERSION }}
        cache: 'npm'
    
    - name: üì• Install dependencies
      run: npm ci
    
    - name: üèóÔ∏è Build project
      run: npm run build
      env:
        VITE_SUPABASE_URL: ${{ secrets.VITE_SUPABASE_URL }}
        VITE_SUPABASE_ANON_KEY: ${{ secrets.VITE_SUPABASE_ANON_KEY }}
        VITE_SITE_URL: ${{ secrets.VITE_SITE_URL }}
        VITE_APP_ENVIRONMENT: production
    
    # Deploy para Vercel
    - name: üî∫ Deploy to Vercel
      uses: amondnet/vercel-action@v25
      with:
        vercel-token: ${{ secrets.VERCEL_TOKEN }}
        vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
        vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
        vercel-args: '--prod'
        working-directory: ./

  # Job de notifica√ß√£o
  notify:
    name: üì¢ Notify Deploy Status
    needs: [validate, deploy]
    runs-on: ubuntu-latest
    if: always()
    
    steps:
    - name: üì¢ Deploy Success Notification
      if: needs.deploy.result == 'success'
      run: |
        echo "‚úÖ Deploy realizado com sucesso!"
        echo "üåê Site dispon√≠vel em: https://edublin.vercel.app"
    
    - name: üì¢ Deploy Failure Notification
      if: needs.deploy.result == 'failure'
      run: |
        echo "‚ùå Deploy falhou!"
        echo "üîç Verifique os logs para mais detalhes"
```

### 6.2 Configurar Secrets no GitHub

1. **No GitHub**, v√° para: `Settings` ‚Üí `Secrets and variables` ‚Üí `Actions`
2. **Adicione os seguintes secrets**:

```
VITE_SUPABASE_URL=https://seu-projeto.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIs...
VITE_SITE_URL=https://edublin.vercel.app
VERCEL_TOKEN=seu-token-vercel
VERCEL_ORG_ID=seu-org-id
VERCEL_PROJECT_ID=seu-project-id
```

## üîÑ Passo 7: Sincroniza√ß√£o com Figma Make

### 7.1 Script de Sincroniza√ß√£o

```javascript
// scripts/sync-figma.js
/**
 * Script para sincronizar mudan√ßas do Figma Make com GitHub
 */

const fs = require('fs');
const path = require('path');
const { execSync } = require('child_process');

const log = {
  info: (msg) => console.log(`‚ÑπÔ∏è  ${msg}`),
  success: (msg) => console.log(`‚úÖ ${msg}`),
  warning: (msg) => console.log(`‚ö†Ô∏è  ${msg}`),
  error: (msg) => console.log(`‚ùå ${msg}`)
};

async function syncWithFigma() {
  log.info('Iniciando sincroniza√ß√£o com Figma Make...');
  
  try {
    // 1. Verificar se h√° mudan√ßas locais n√£o commitadas
    const gitStatus = execSync('git status --porcelain', { encoding: 'utf8' });
    
    if (gitStatus.trim()) {
      log.warning('H√° mudan√ßas n√£o commitadas. Fazendo backup...');
      
      // Criar branch de backup
      const timestamp = new Date().toISOString().slice(0, 16).replace(/[:.]/g, '-');
      const backupBranch = `backup-${timestamp}`;
      
      execSync(`git checkout -b ${backupBranch}`);
      execSync('git add .');
      execSync(`git commit -m "üîÑ Backup antes da sincroniza√ß√£o com Figma Make"`);
      execSync('git checkout main');
      
      log.success(`Backup criado na branch: ${backupBranch}`);
    }
    
    // 2. Baixar √∫ltima vers√£o do Figma Make
    log.info('Baixando √∫ltima vers√£o do Figma Make...');
    
    // Aqui voc√™ implementaria a l√≥gica espec√≠fica do Figma Make
    // Por exemplo, se eles fornecem API ou webhook
    await downloadLatestFromFigma();
    
    // 3. Verificar se houve mudan√ßas
    const newGitStatus = execSync('git status --porcelain', { encoding: 'utf8' });
    
    if (!newGitStatus.trim()) {
      log.info('Nenhuma mudan√ßa detectada.');
      return;
    }
    
    // 4. Commit das mudan√ßas
    log.info('Commitando mudan√ßas do Figma Make...');
    
    execSync('git add .');
    execSync('git commit -m "üîÑ Sync: Atualiza√ß√£o autom√°tica do Figma Make\n\n- Sincroniza√ß√£o autom√°tica dos componentes\n- Atualiza√ß√£o da estrutura do projeto\n- Preserva√ß√£o das configura√ß√µes locais"');
    
    // 5. Push para GitHub
    log.info('Enviando para GitHub...');
    execSync('git push origin main');
    
    log.success('Sincroniza√ß√£o conclu√≠da com sucesso!');
    
    // 6. Notificar sobre deploy autom√°tico
    log.info('GitHub Actions iniciar√° deploy autom√°tico...');
    
  } catch (error) {
    log.error(`Erro durante sincroniza√ß√£o: ${error.message}`);
    
    // Rollback em caso de erro
    log.info('Fazendo rollback...');
    execSync('git reset --hard HEAD~1');
    
    process.exit(1);
  }
}

async function downloadLatestFromFigma() {
  // Esta fun√ß√£o dependeria da API/m√©todo do Figma Make
  // Por enquanto, simulamos o processo
  
  log.info('üì• Simulando download do Figma Make...');
  
  // Exemplo de como seria:
  // const response = await fetch('https://api.figma-make.com/export', {
  //   headers: { 'Authorization': `Bearer ${process.env.FIGMA_MAKE_TOKEN}` }
  // });
  // const data = await response.blob();
  // ... extrair e sobrescrever arquivos
  
  await new Promise(resolve => setTimeout(resolve, 2000));
  log.success('Download simulado conclu√≠do');
}

// Executar se chamado diretamente
if (require.main === module) {
  syncWithFigma();
}

module.exports = { syncWithFigma };
```

### 7.2 Webhook para Sincroniza√ß√£o Autom√°tica

```javascript
// scripts/figma-webhook.js
/**
 * Webhook para receber notifica√ß√µes do Figma Make
 * Deploy em Vercel ou Netlify como serverless function
 */

const { syncWithFigma } = require('./sync-figma');

export default async function handler(req, res) {
  // Verificar m√©todo
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }
  
  try {
    // Verificar autentica√ß√£o do webhook
    const signature = req.headers['x-figma-signature'];
    const expectedSignature = process.env.FIGMA_WEBHOOK_SECRET;
    
    if (signature !== expectedSignature) {
      return res.status(401).json({ error: 'Unauthorized' });
    }
    
    // Processar payload
    const { event, data } = req.body;
    
    if (event === 'project.updated') {
      console.log('üîÑ Figma Make project updated, triggering sync...');
      
      // Disparar sincroniza√ß√£o (em background)
      syncWithFigma().catch(console.error);
      
      return res.status(200).json({ 
        success: true, 
        message: 'Sync triggered successfully' 
      });
    }
    
    return res.status(200).json({ 
      success: true, 
      message: 'Event received but not processed' 
    });
    
  } catch (error) {
    console.error('Webhook error:', error);
    return res.status(500).json({ error: 'Internal server error' });
  }
}
```

## üìö Passo 8: Documenta√ß√£o e Colabora√ß√£o

### 8.1 Atualizar README.md

```markdown
# üåü Edublin - Conectando Intercambistas

> Desenvolvido com Figma Make ‚Üí Conectado com GitHub ‚Üí Deploy Autom√°tico

## üîó Links Importantes

- **üé® Design**: [Figma Make Project](link-do-seu-projeto)
- **üíª C√≥digo**: [GitHub Repository](https://github.com/seu-usuario/edublin)
- **üåê Produ√ß√£o**: [Site Live](https://edublin.vercel.app)
- **üìä Status**: [GitHub Actions](https://github.com/seu-usuario/edublin/actions)

## üöÄ Desenvolvimento

Este projeto √© sincronizado automaticamente entre Figma Make e GitHub.

### Fluxo de Desenvolvimento

1. **Design**: Fa√ßa mudan√ßas no Figma Make
2. **Sync**: Mudan√ßas s√£o sincronizadas automaticamente
3. **Deploy**: GitHub Actions faz deploy autom√°tico
4. **Live**: Mudan√ßas aparecem no site

### Comandos √öteis

```bash
# Sincroniza√ß√£o manual
npm run sync:figma

# Deploy manual
npm run deploy:vercel

# Desenvolvimento local
npm run dev
```

## ü§ù Contribuindo

1. Fork o reposit√≥rio
2. Crie uma branch: `git checkout -b feature/nova-funcionalidade`
3. Fa√ßa commit: `git commit -m 'Add nova funcionalidade'`
4. Push: `git push origin feature/nova-funcionalidade`
5. Abra um Pull Request

## üìû Suporte

- **Issues**: [GitHub Issues](https://github.com/seu-usuario/edublin/issues)
- **Discussions**: [GitHub Discussions](https://github.com/seu-usuario/edublin/discussions)
```

### 8.2 Configurar Issues e PR Templates

```markdown
<!-- .github/ISSUE_TEMPLATE/bug_report.md -->
---
name: üêõ Bug Report
about: Reportar um problema
title: '[BUG] '
labels: bug
assignees: ''
---

## üêõ Descri√ß√£o do Bug
Descri√ß√£o clara do problema.

## üîÑ Passos para Reproduzir
1. V√° para '...'
2. Clique em '...'
3. Veja o erro

## ‚úÖ Comportamento Esperado
O que deveria acontecer.

## üì± Ambiente
- **Browser**: [ex: Chrome 91]
- **Device**: [ex: iPhone 12]
- **OS**: [ex: iOS 14.6]

## üì∏ Screenshots
Se aplic√°vel, adicione screenshots.

## üîó Figma Make
- [ ] O bug tamb√©m existe no Figma Make?
- [ ] √â necess√°rio atualizar o design?
```

## üîÑ Passo 9: Automa√ß√£o Completa

### 9.1 GitHub Action para Sync Autom√°tico

```yaml
# .github/workflows/sync-figma.yml
name: üîÑ Sync with Figma Make

on:
  # Trigger manual
  workflow_dispatch:
  
  # Trigger agendado (di√°rio √†s 9h)
  schedule:
    - cron: '0 9 * * *'
  
  # Trigger via webhook (se configurado)
  repository_dispatch:
    types: [figma-updated]

jobs:
  sync:
    name: üîÑ Sync with Figma Make
    runs-on: ubuntu-latest
    
    steps:
    - name: üì• Checkout
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        fetch-depth: 0
    
    - name: üì¶ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: üì• Install dependencies
      run: npm ci
    
    - name: üîÑ Sync with Figma Make
      run: npm run sync:figma
      env:
        FIGMA_MAKE_TOKEN: ${{ secrets.FIGMA_MAKE_TOKEN }}
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    
    - name: üì¢ Notify if changes
      if: success()
      run: |
        echo "‚úÖ Sincroniza√ß√£o conclu√≠da!"
        echo "Deploy autom√°tico ser√° iniciado se houver mudan√ßas."
```

### 9.2 Script de Setup Completo

```bash
#!/bin/bash
# scripts/setup-github-integration.sh

echo "üîó Configurando integra√ß√£o Figma Make ‚Üí GitHub"
echo "=============================================="

# 1. Verificar depend√™ncias
command -v git >/dev/null 2>&1 || { echo "‚ùå Git n√£o instalado. Abortando." >&2; exit 1; }
command -v node >/dev/null 2>&1 || { echo "‚ùå Node.js n√£o instalado. Abortando." >&2; exit 1; }

# 2. Configurar Git (se necess√°rio)
if [ -z "$(git config user.name)" ]; then
    read -p "üìù Digite seu nome para Git: " git_name
    git config --global user.name "$git_name"
fi

if [ -z "$(git config user.email)" ]; then
    read -p "üìß Digite seu email para Git: " git_email
    git config --global user.email "$git_email"
fi

# 3. Inicializar reposit√≥rio se necess√°rio
if [ ! -d ".git" ]; then
    echo "üÜï Inicializando reposit√≥rio Git..."
    git init
    git branch -M main
fi

# 4. Instalar depend√™ncias
echo "üì¶ Instalando depend√™ncias..."
npm install

# 5. Configurar hooks
echo "ü™ù Configurando Git hooks..."
cat > .git/hooks/pre-commit << 'EOF'
#!/bin/sh
# Pre-commit hook para verificar c√≥digo

echo "üîç Executando verifica√ß√µes pr√©-commit..."

# Lint
npm run lint --silent || exit 1

# Type check
npm run type-check --silent || exit 1

echo "‚úÖ Verifica√ß√µes pr√©-commit aprovadas!"
EOF

chmod +x .git/hooks/pre-commit

# 6. Criar primeiro commit se necess√°rio
if [ -z "$(git log --oneline 2>/dev/null)" ]; then
    echo "üìù Fazendo commit inicial..."
    git add .
    git commit -m "üéâ Initial commit: Projeto Edublin integrado do Figma Make

- ‚úÖ Estrutura completa implementada
- ‚úÖ Integra√ß√£o GitHub configurada
- ‚úÖ Deploy autom√°tico ativo
- ‚úÖ Sincroniza√ß√£o Figma Make

Ready for production! üöÄ"
fi

echo ""
echo "‚úÖ Integra√ß√£o configurada com sucesso!"
echo ""
echo "üìã Pr√≥ximos passos:"
echo "1. üêô Crie um reposit√≥rio no GitHub"
echo "2. üîó Conecte: git remote add origin https://github.com/SEU_USUARIO/edublin.git"
echo "3. üöÄ Envie: git push -u origin main"
echo "4. ‚öôÔ∏è Configure secrets no GitHub (Supabase, Vercel, etc.)"
echo "5. üéâ Pronto! Deploy autom√°tico ativo"
echo ""
echo "üîó Links √∫teis:"
echo "- GitHub: https://github.com"
echo "- Vercel: https://vercel.com"
echo "- Supabase: https://supabase.com"
```

## ‚úÖ Checklist Final

- [ ] ‚úÖ C√≥digo exportado do Figma Make
- [ ] ‚úÖ Reposit√≥rio GitHub criado
- [ ] ‚úÖ Arquivos organizados e commitados
- [ ] ‚úÖ GitHub Actions configurado
- [ ] ‚úÖ Secrets configurados no GitHub
- [ ] ‚úÖ Deploy autom√°tico funcionando
- [ ] ‚úÖ Sincroniza√ß√£o Figma Make ‚Üí GitHub
- [ ] ‚úÖ Webhook configurado (opcional)
- [ ] ‚úÖ Documenta√ß√£o atualizada
- [ ] ‚úÖ Time/colaboradores adicionados

## üÜò Troubleshooting

### Problema: Deploy falha
```bash
# Verificar logs
git log --oneline -5

# Verificar GitHub Actions
# GitHub ‚Üí Actions ‚Üí Ver logs do workflow
```

### Problema: Sync n√£o funciona
```bash
# Verificar sincroniza√ß√£o manual
npm run sync:figma

# Verificar permiss√µes
git remote -v
git status
```

### Problema: Conflitos de merge
```bash
# Resolver conflitos
git status
git add .
git commit -m "üîß Resolve merge conflicts"
```

---

**üéâ Parab√©ns! Seu projeto Figma Make agora est√° conectado com GitHub e tem deploy autom√°tico!**

**üîÑ Fluxo completo:**
Figma Make ‚Üí GitHub ‚Üí Actions ‚Üí Deploy ‚Üí Produ√ß√£o üöÄ